<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<title>Vinyl Junky | Product Table</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
    background:#2e2e2e;
    color:#f5e6c8;
    font-family: 'VT323', monospace;
    padding:40px;
}

h1{
    text-align:center;
    margin-bottom:20px;
    letter-spacing:2px;
}

table{
    width:100%;
    border-collapse:collapse;
    background:#3a3a3a;
}

th,td{
    border:1px solid #555;
    padding:10px;
    text-align:center;
    font-size:18px;
}

th{
    background:#4b6cb7;
    color:#fff;
}

tr:nth-child(even){
    background:#444;
}

input[type="number"]{
    width:60px;
    padding:4px;
    font-family:inherit;
}

button{
    padding:6px 12px;
    background:#f5c97a;
    border:none;
    cursor:pointer;
    font-family:inherit;
}

button:hover{
    background:#ffd966;
}

.summary{
    margin-top:25px;
    background:#1f1f1f;
    padding:20px;
    font-size:20px;
}

.summary p{
    margin:8px 0;
}

.total{
    font-size:24px;
    color:#ffd966;
}
</style>
</head>

<body>

<h1>ðŸŸ¡ Vinyl Junky â€“ New Releases</h1>

<table>
<thead>
<tr>
    <th>No.</th>
    <th>Album</th>
    <th>Artist</th>
    <th>Price (à¸¿)</th>
    <th>Stock</th>
    <th>Qty</th>
    <th>Action</th>
</tr>
</thead>

<tbody id="productTable"></tbody>
</table>

<div class="summary">
    <p>Items: <span id="itemCount">0</span></p>
    <p>Subtotal: à¸¿<span id="subTotal">0</span></p>
    <p>Discount: -à¸¿<span id="discount">0</span></p>
    <p>VAT 7%: à¸¿<span id="vat">0</span></p>
    <p class="total">Total: à¸¿<span id="grandTotal">0</span></p>
</div>

<script>
// ===== PRODUCT DATA =====
const products = [
 {name:"Midnight Static", artist:"Neon Mirage", price:650, stock:10},
 {name:"Broken Cassette", artist:"Velvet Riot", price:720, stock:8},
 {name:"Retro Skyline", artist:"Chrome Youth", price:680, stock:12},
 {name:"Last Analog Dream", artist:"Pink Circuit", price:790, stock:6},
 {name:"Noise After Rain", artist:"Moonline", price:640, stock:9},
 {name:"Vinyl Ghosts", artist:"Static Love", price:710, stock:7},
 {name:"Electric Memory", artist:"Neon Saints", price:760, stock:5},
 {name:"Late Train Home", artist:"Blue Avenue", price:630, stock:11},
 {name:"Signal Lost", artist:"Cassette Boy", price:700, stock:6},
 {name:"Faded Polaroid", artist:"Soft Disaster", price:690, stock:10}
];

let cart = [];

// ===== RENDER TABLE =====
const table = document.getElementById("productTable");

products.forEach((p,i)=>{
    cart[i] = 0;
    table.innerHTML += `
    <tr>
        <td>${i+1}</td>
        <td>${p.name}</td>
        <td>${p.artist}</td>
        <td>${p.price}</td>
        <td>${p.stock}</td>
        <td>
            <input type="number" min="0" value="0" 
            onchange="updateQty(${i}, this.value)">
        </td>
        <td><button onclick="addToCart(${i})">Add</button></td>
    </tr>`;
});

// ===== FUNCTIONS =====
function updateQty(index,value){
    if(value > products[index].stock){
        alert("âŒ à¸ªà¸´à¸™à¸„à¹‰à¸²à¹ƒà¸™ stock à¹„à¸¡à¹ˆà¸žà¸­!");
        value = products[index].stock;
    }
    cart[index] = parseInt(value);
    calculate();
}

function addToCart(index){
    if(cart[index] === 0){
        cart[index] = 1;
    }else{
        cart[index]++;
    }

    if(cart[index] > products[index].stock){
        cart[index] = products[index].stock;
        alert("âŒ à¸ªà¸´à¸™à¸„à¹‰à¸²à¹ƒà¸™ stock à¹„à¸¡à¹ˆà¸žà¸­!");
    }
    document.querySelectorAll("input")[index].value = cart[index];
    calculate();
}

function calculate(){
    let items = 0;
    let subtotal = 0;

    cart.forEach((qty,i)=>{
        items += qty;
        subtotal += qty * products[i].price;
    });

    let discount = (items >= 5) ? subtotal * 0.10 : 0;
    let afterDiscount = subtotal - discount;
    let vat = afterDiscount * 0.07;
    let total = afterDiscount + vat;

    document.getElementById("itemCount").innerText = items;
    document.getElementById("subTotal").innerText = subtotal.toFixed(2);
    document.getElementById("discount").innerText = discount.toFixed(2);
    document.getElementById("vat").innerText = vat.toFixed(2);
    document.getElementById("grandTotal").innerText = total.toFixed(2);
}
</script>

</body>
</html>